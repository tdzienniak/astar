<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    
</body>
<script src="../src/orderedlinkedlist.js"></script>
<script src="../src/astar.js"></script>
<script>
    window.addEventListener("load", function (e) {
        var canvas = document.createElement("canvas");
        canvas.height = 500;
        canvas.width = 500;

        document.body.appendChild(canvas);

        var ctx = canvas.getContext("2d");

        var world = [];

        for (var x = 0; x < 50; x++) {
            world[x] = [];
            for (var y = 0; y < 50; y++) {
                world[x][y] = {
                    passability: 10
                };
            }
        }
        world[16][1].passability = 150;
        world[16][2].passability = 150;
        world[16][3].passability = 150;
        world[16][4].passability = 150;

        world[16][5].passability = 150;
        world[17][5].passability = 150;
        world[18][5].passability = 150;
        world[19][5].passability = 150;

        world[20][5].passability = 150;
        world[20][6].passability = 150;
        world[20][7].passability = 150;
        world[20][8].passability = 150;
        world[20][9].passability = 150;
        world[20][10].passability = 150;
        world[20][11].passability = 150;
        world[20][12].passability = 150;
        world[20][13].passability = 150;
        world[20][14].passability = 150;
        world[20][15].passability = 150;
        world[20][16].passability = 150;
        world[20][17].passability = 150;

        world[19][17].passability = 150;
        world[18][17].passability = 150;
        world[17][17].passability = 150;
        world[16][17].passability = 150;
        world[15][17].passability = 150;
        world[14][17].passability = 150;
        world[13][17].passability = 150;

        ctx.fillStyle = "black";
        for (var x = 0; x < 50; x++) {
            for (var y = 0; y < 50; y++) {
                if (world[x][y].passability > 100) {
                    ctx.fillRect(x * 10, y * 10, 10, 10);
                }
            }
        }

        astar.setWorld(world);

        console.time("Path-finding: ");
        var path = astar.findPath(5, 10, 25, 11);
        console.timeEnd("Path-finding: ");

        ctx.fillStyle = "red";
        for (var i = 0, len = path.length; i < len; i++) {
            ctx.fillRect(path[i].x * 10 + 3, path[i].y * 10 + 3, 4, 4);
        }

    }, false);
</script>
</html>